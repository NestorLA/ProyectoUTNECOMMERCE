<div class="container">
    <div class="row">
        <div class="col-12 text-center mt-5">
            <h4>Categorías cargadas</h4>
            <div class="mt-3 d-flex justify-content-around">
                    <a href="/admin/index"><button type="button" class="btn btn-warning btn-block text-white"><i class="fa fa-arrow-left" aria-hidden="true"></i>
 Volver</button></a>
                    <a href="/admin/categorias/alta"><button type="button" class="btn btn-warning text-white">Alta de categorías</button></a>
            </div>
            <table class="table table-hover table-responsive mt-3 text-center table-bordered">
                <thead class="bg-warning text-white">
                    <tr>
                        <th>Nombre</th>
                        <th>Modificar</th>
                        <th>Eliminar</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each categorias}}
                    <tr>
                        <td>{{categoria}}</td>
                        <td><a href="/admin/categorias/modi/{{id_categoria}}"><i class="fas fa-cogs text-primary pr-3 pl-3" 
                            style="cursor: pointer;"></i></a></td>
                        {{!-- /admin/productos/baja/4 --}}
                        <td id="borrar"><a href="/admin/categorias/baja/{{id_categoria}}"><i class="fas fa-trash text-danger pr-3 pl-3"   style="cursor: pointer;"></i></a>
                        </td></form>
                    </tr>
                    {{!--  XMLHTTPRequest  --}}
                    {{/each}}
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
    // document
    // window -> 
    // listener (evento, callback/funcion)
    window.addEventListener('load', () => {
        console.log("Cargado..")
        document.getElementById('borrar').addEventListener('click', botonApretado);
    });

    const botonApretado = () => {
        console.log("%cUpss me apretaron 😜🐱‍🏍", "color:red");
      //  const datos = new URLSearchParams(new FormData(document.getElementById('form1')));
        // fetch
        fetch('/admin/categorias/baja/:id', {
            method: 'DELETE',
            body: datos
        })
            .then(response => response.json())
            .then(data => message(data));
    }

    const message = (datos) => {
        if (datos.success == true) {
            Swal.fire({
                position: 'center',
                icon: 'success',
                title: 'Categoria modificada 🤞',
                showConfirmButton: true,
            })
        } else {
            Swal.fire({
                position: 'center',
                icon: 'error',
                title: 'Oops... Ocurrio un error 🤣',
                showConfirmButton: true,
            })
        }
    }


</script>